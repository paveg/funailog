---
import { BackpackIcon } from '@radix-ui/react-icons';

import type { SupportedLang } from '@/config/site';
import type { Education } from '@/schemas/portfolio-collection';

import { useTranslations } from '@/i18n/utils';

interface Props {
  items: Education[];
  lang?: SupportedLang;
}

const { items, lang = 'ja' } = Astro.props;
const t = useTranslations(lang);

function formatPeriod(period: { start: string; end: string | null }): string {
  const start = period.start.replace('-', '/');
  const end = period.end
    ? period.end.replace('-', '/')
    : lang === 'en'
      ? 'Present'
      : '在学中';
  return `${start} - ${end}`;
}
---

<section class="space-y-4">
  <h2 class="font-heading text-xl font-semibold">{t('portfolio.education')}</h2>
  <div class="space-y-3">
    {
      items.map((edu) => (
        <div class="border-border/50 bg-card/50 hover:border-border flex items-start gap-3 rounded-lg border p-3 transition-colors">
          <BackpackIcon className="mt-0.5 size-4 shrink-0 text-amber-600 dark:text-amber-400" />
          <div>
            <span class="font-medium">{edu.institution}</span>
            <div class="text-muted-foreground mt-0.5 flex flex-wrap items-center gap-2 text-xs">
              <span>{edu.degree}</span>
              {edu.field && (
                <>
                  <span>•</span>
                  <span>{edu.field}</span>
                </>
              )}
              <span>•</span>
              <span>{formatPeriod(edu.period)}</span>
            </div>
          </div>
        </div>
      ))
    }
  </div>
</section>
