---
import { CodeIcon } from '@radix-ui/react-icons';

import type { SupportedLang } from '@/config/site';

interface Props {
  lang?: SupportedLang;
}

const { lang = 'ja' } = Astro.props;
const isDev = import.meta.env.DEV;

const texts = {
  ja: {
    title: 'CV生成（開発環境のみ）',
    description:
      '非公開情報（住所・電話番号など）を含むPDFを生成するには、以下のコマンドを実行してください。',
    note: '.envファイルにCV_ADDRESS, CV_PHONE, CV_EMAIL, CV_BIRTH_DATEを設定してください。',
  },
  en: {
    title: 'CV Generation (Dev only)',
    description:
      'To generate a PDF with private information (address, phone, etc.), run the following command.',
    note: 'Set CV_ADDRESS, CV_PHONE, CV_EMAIL, CV_BIRTH_DATE in your .env file.',
  },
};

const t = texts[lang];
---

{
  isDev && (
    <div class="border-border rounded-md border border-dashed p-4">
      <p class="text-foreground mb-2 text-sm font-medium">{t.title}</p>
      <p class="text-muted-foreground mb-3 text-sm">{t.description}</p>
      <div class="bg-muted flex items-center gap-2 rounded-md p-3 font-mono text-sm">
        <CodeIcon className="text-muted-foreground size-4 shrink-0" />
        <code class="text-foreground">pnpm cv</code>
      </div>
      <p class="text-muted-foreground/80 mt-2 text-xs">{t.note}</p>
    </div>
  )
}
